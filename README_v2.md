# 双序列 N-Back 游戏 V2 更新说明

## 简介

本项目是双序列N-Back认知训练小游戏的第二个版本，基于Python和Kivy框架开发。此版本根据用户反馈进行了多项功能增强和UI改进，旨在提供更佳的用户体验和更灵活的训练选项。

## 主要更新内容

1.  **N值可调**：在主菜单界面，用户现在可以通过“+”和“-”按钮调整N值，范围从1到7。默认N值为2。
2.  **启动画面**：游戏启动时会显示一个持续1.5秒的载入图片（Rick-SunRaise.jpg），随后通过0.5秒的渐变透明效果过渡到主菜单。
3.  **主菜单优化**：主菜单界面现在包含N值调整选项和“Start Game”按钮，点击后进入游戏主界面。
4.  **游戏界面图标**：游戏主界面左上角会显示一个64x64像素的图标（64x64icon1.png）。
5.  **游戏信息弹窗**：游戏主界面右上角增加了一个“?”按钮。按住此按钮（或鼠标悬停，当前实现为点击显示/再次点击或移开鼠标后消失）会弹出一个半透明窗口，显示游戏玩法说明和开发者信息。
6.  **九宫格视觉优化**：游戏主界面的九宫格之间增加了间距，并为每个格子添加了边框线，使其在未开始游戏时也能清晰区分。
7.  **游戏结束弹窗**：一局游戏结束后，会弹出一个居中模态窗口，显示本局得分。该窗口大小为屏幕的60%宽度和40%高度，需要点击窗口内的“OK”按钮才能关闭并返回主菜单。

## 文件结构

-   `nback_logic.py`: 核心N-Back游戏逻辑模块，已更新以支持动态N值。
-   `nback_ui_v2.py`: Kivy实现的图形用户界面主程序，包含所有V2更新。
-   `README_v2.md`: 本更新说明文件。
-   `todo_v2.md`: V2版本的开发任务清单。
-   `/upload/Rick-SunRaise.jpg`: 启动画面使用的图片。
-   `/upload/64x64icon1.png`: 游戏界面左上角显示的图标。

##运行环境要求

-   Python 3.x
-   Kivy 2.0.0 或更高版本

## 安装与运行

1.  **安装Python**: 如果您尚未安装Python，请从 [python.org](https://www.python.org/) 下载并安装。
2.  **安装Kivy**: 打开终端或命令行，运行以下命令安装Kivy及其依赖：
    ```bash
    pip install kivy
    ```
    如果遇到问题，请参考Kivy官方安装指南：[https://kivy.org/doc/stable/gettingstarted/installation.html](https://kivy.org/doc/stable/gettingstarted/installation.html)
3.  **准备资源文件**: 确保 `Rick-SunRaise.jpg` 和 `64x64icon1.png` 图片文件与 `nback_ui_v2.py` 和 `nback_logic.py` 在同一目录下，或者修改 `nback_ui_v2.py` 中相应的图片路径变量 (`SPLASH_IMAGE_PATH`, `ICON_PATH`) 指向正确的位置。在当前版本中，路径已设置为 `/home/ubuntu/upload/`，请根据您的实际存放位置调整或将图片放入该路径。
4.  **运行游戏**: 在终端或命令行中，导航到包含 `nback_ui_v2.py` 文件的目录，然后运行：
    ```bash
    python nback_ui_v2.py
    ```

## 跨平台兼容性

-   **Windows 10/11**: 已测试，功能完整。
-   **Linux**: 已在沙箱环境（Ubuntu）测试，Kivy应用可正常启动和运行。
-   **iOS**: Kivy支持iOS打包（通过Kivy-iOS工具链），但需要macOS环境和额外步骤进行编译和部署。此Python脚本本身是跨平台的，但iOS应用商店上架有其特定流程。

## 注意事项

-   信息弹窗的“鼠标悬停/按住显示，移开/松开消失”的精确交互在Kivy中实现较为复杂，当前版本简化为点击“?”按钮显示，再次点击按钮或弹窗外的其他操作可能会关闭它（具体行为取决于Kivy Popup的默认设置和当前实现）。当前实现为点击显示，再次点击按钮关闭。
-   音频刺激部分仍为数字显示，未加入实际声音播放。

感谢您的测试和反馈！
